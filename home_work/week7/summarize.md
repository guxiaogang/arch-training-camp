### 性能测试
性能测试是性能优化的前提和基础，也是性能优化结果的检查和度量标准。不同视角下的网站性能有不同的标准。

* 主观视角：用户感受到的性能。
* 客观视角：性能指标衡量的性能。

### 性能测试指标
* 响应时间  
* 并发数
* 吞吐量

  吞吐量 = (1000 / 响应时间ms) * 并发数
  
### 性能计数器
System Load、对象与线程数、内存使用、CPU 使用、磁盘与网络 I/O 等指标。

### 性能测试方法
* 性能测试:
以系统设计初期规划的性能指标为预期目标，对系统不断施加压力，验证系统在资源可接收范围内，是否能达到性能预期。

* 负载测试:
对系统不断地增加并发请求以增加系统压力，直到系统的某项或多项性能指标达成安全临界值，如某种资源已经呈饱和状态，这时候继续对系统施加压力，系统的处理能力不但不能提高，反而会下降。

* 压力测试:
超过安全负载的情况下，对系统继续施加压力，知道系统崩溃或不能再处理任何请求，以获得系统最大压力承受能力。

* 稳定性测试:
被测试系统在特定硬件、软件、网络环境条件下，给系统加载一定业务压力，使系统运行一段较长时间，以此检测系统是否稳定。在生产环境，请求压力是不均匀的，呈波浪特性，因此为了更好地模拟生产环境，稳定性测试也应不均匀地对系统施加压力。

### 性能优化的一般方法
1. 性能测试，获得性能指标。
2. 指标分析，发现性能与资源瓶颈点。
3. 架构与代码分析，寻找性能与资源瓶颈关键所在。
4. 架构与代码优化，优化关键技术点，平衡资源利用。
5. 性能测试，进入性能优化闭环。

### 系统性能优化的分层思想
1. 机房与骨干网络性能优化。
2. 服务器与硬件性能优化。（垂直伸缩）
3. 操作系统性能优化。
4. 虚拟机性能优化。（垃圾回收性能优化，锁对性能的优化）
5. 基础组件性能优化
6. 软件架构性能优化
7. 软件代码性能优化

### 软件架构性能优化三板斧
* 缓存
* 异步
* 集群

本主题最能引起共鸣的点：
软件性能优化的两个基本原则

* 你不能优化一个没有测试的软件。（这个原则印象深刻。第一次做性能优化的时候并没有做过性能测试和监控，而是以经验对代码和表结构做了些调整
，做完这些后性能有提升，但是不是那么显著，引入性能测试和监控后发现写log是影响系统性能的最大因素，把写log换成异步写后性能提升非常显著）
* 你不能优化一个你不了解的软件。